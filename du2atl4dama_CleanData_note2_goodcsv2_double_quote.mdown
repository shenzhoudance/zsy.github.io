## ç†Šæœ¬ğŸ»-> atl4damaè§é—»å½•2: good csvå¯èƒ½é•¿å•¥æ ·ï¼Ÿ(ä¸‹)?

### èƒŒæ™¯
å€˜è‹¥fieldé‡Œ, å·²åŒ…å«double quote, åº”è¯¥å¦‚ä½•åŠ escape characterï¼Ÿ

### å‚è€ƒèµ„æ–™

[RFC 4180 - Common Format and MIME Type for Comma-Separated Values (CSV) Files](https://tools.ietf.org/html/rfc4180)

[Escaping in CSV Formatted Files | Pivotal Greenplum Database Docs](https://gpdb.docs.pivotal.io/4360/admin_guide/load/topics/g-escaping-in-csv-formatted-files.html)

### æ¡ˆä¾‹

- ä¾‹1

If double-quotes are used to enclose fields, then a double-quote appearing inside a field must be escaped by preceding it with another double quote.  For example:

```
# RFC 4180

    "aaa","b""bb","ccc"     # RFC 4180 èµåŒè¿™ç§æ ¼å¼
    "aaa","b""""bb","ccc"   # Greenplum  èµåŒè¿™ç§æ ¼å¼

```

- ä¾‹2

load the following three fields:

Free trip to A,B
5.89
Special rate "1.79"

delimiter character is , (comma), 
escape character is " (double quote). 

The formatted data:

```
# Pivotal Greenplum Database Docs 

"Free trip to A,B","5.89","Special rate ""1.79"""

```

### é—®é¢˜

- ä¸ºä»€ä¹ˆ`aaa,b""bb,ccc` ä¸è¢«formartä¸º, `"aaa","b""""bb","ccc"`
- ä¸¤è€…åœ¨å®é™…loadingé‡Œæœ‰åŒºåˆ«å—ï¼Ÿ

### èµ„æ–™é è°±åº¦

- RFC 
  + RFCå§‹æ–¼1969å¹´ï¼Œç”±å²è’‚èŠ¬Â·å…‹ç¾…å…‹ç”¨ä¾†è¨˜éŒ„æœ‰é—œARPANETé–‹ç™¼çš„éæ­£å¼æ–‡ä»¶ï¼Œæœ€çµ‚æ¼”è®Šç‚ºç”¨ä¾†è¨˜éŒ„ç¶²éš›ç¶²è·¯è¦ç¯„ã€å”å®šã€éç¨‹ç­‰çš„æ¨™æº–æª”æ¡ˆã€‚
  + RFCæª”æ¡ˆåªæœ‰æ–°å¢ï¼Œä¸æœƒæœ‰å–æ¶ˆæˆ–ä¸­é€”åœæ­¢ç™¼è¡Œçš„æƒ…å½¢ã€‚ä½†æ˜¯å°æ–¼åŒä¸€ä¸»é¡Œè€Œè¨€ï¼Œæ–°çš„RFCæª”æ¡ˆå¯ä»¥è²æ˜å–ä»£èˆŠçš„RFCæª”æ¡ˆã€‚
  + [RFC - ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸](https://zh.wikipedia.org/wiki/RFC)

- Pivotal Greenplum
  + äº§å“: The Greenplum Database (åŸºäºPython, ORCA)
  + ä»“åº“: [greenplum-db/gpdb: Greenplum Database](https://github.com/greenplum-db/gpdb)
  + ç›¸å…³: MPP SSD Hadoop

### æ€»ç»“
æœ¬æ–‡å±•ç¤ºå‡ºé’ˆå¯¹æŸä¸€æƒ…æ™¯ä¸‹, csv formatçš„ä¸¤ç§æˆªç„¶ä¸åŒçš„æŒ‡å¯¼æ„è§. å¯çŸ¥æŠ€æœ¯ç»†èŠ‚, äº‰è®ºé¢‡å¤š...

è™½ç„¶RFC 4180å°±fieldå†…å«double quoteç»™å‡ºæŒ‡å¯¼, ä½†é‚£ä¹Ÿæ˜¯2005å¹´çš„äº‹äº†.å•†ä¸šå…¬å¸ä¹Ÿä¼šæä¾›csv formatçš„å®æˆ˜æ„è§...

é¢å¯¹æŠ€æœ¯ç»†èŠ‚, å¯¹æ¯”æƒå¨vsæœ€æ–°, æ˜¯ä¿è¯å‚è€ƒèµ„æ–™é è°±åº¦çš„ä¸€ä¸ªå¯ä»¥æ¢ç´¢çš„ç»´åº¦...